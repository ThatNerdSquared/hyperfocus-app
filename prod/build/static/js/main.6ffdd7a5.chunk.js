(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),a=n(33),s=n.n(a),r=n(8),l=n.n(r),d=n(12),c=n(34),m=n(35),u=n(36),h=n(2),g=n(40),p=n(39),j=n(0);var b=function(e){var t;return t=!0===e.isRunning?"Pause":"Resume",Object(j.jsx)("div",{className:"startstop",children:Object(j.jsx)("form",{id:e.id,onSubmit:e.toggleRunning,children:Object(j.jsx)("button",{className:"startstop-button",children:t})})})};var f=function(e){return Object(j.jsxs)("div",{className:"single-option",children:[Object(j.jsx)("form",{name:e.time,id:e.id,onSubmit:e.startTimer,children:Object(j.jsx)("button",{className:"option-button",children:e.time})}),Object(j.jsx)("form",{name:e.time,id:e.id,onSubmit:e.handleDeleteOption,children:Object(j.jsx)("button",{className:"option-delete",children:"Delete"})})]})};var O=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:e.handleAddOption,className:"addOption-form",children:[Object(j.jsx)("input",{type:"text",value:e.newOption,name:"newOption",placeholder:"Add another option... ",onChange:e.formChange,className:"addOption-input"}),Object(j.jsx)("button",{className:"addOption-button",children:"Add"})]})})};var x=function(e){var t=[];return e.timerOptions.forEach((function(n){null!==n&&t.push(Object(j.jsx)(f,{startTimer:e.startTimer,id:e.id,time:n,handleDeleteOption:e.handleDeleteOption}))})),Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(b,{id:e.id,toggleRunning:e.toggleRunning,isRunning:e.isRunning}),Object(j.jsx)("div",{className:"options",children:t}),Object(j.jsx)(O,{newOption:e.newOption,formChange:e.formChange,handleAddOption:e.handleAddOption})]})},v=n(37),w=n.n(v),N=n.p+"static/media/hyperfocus-banner.6d7b49de.svg";var C=function(e){return Object(j.jsxs)("div",{className:"login",children:[Object(j.jsx)("img",{src:N,className:"login-text",width:"600",height:"100",alt:"Hyperfocus app logo"}),Object(j.jsx)("h1",{className:"login-text",children:"Welcome to Hyperfocus!"}),Object(j.jsx)("h1",{className:"login-text",children:"What's your name, and what room are you joining?"}),Object(j.jsxs)("form",{className:"login-form",onSubmit:e.logMeIn,children:[Object(j.jsx)("input",{type:"text",value:e.loginName,name:"loginName",placeholder:"i.e. ThatNerd",onChange:e.formChange,className:"login-input"}),Object(j.jsx)("input",{type:"text",value:e.loginCode,name:"loginCode",placeholder:"i.e. 123456",onChange:e.formChange,className:"login-input"}),Object(j.jsx)("button",{className:"login-button",children:"Login/Join"})]}),e.loginNameValid?null:Object(j.jsx)("p",{className:"warning-text",children:"Please enter a username!"}),e.loginCodeValid?null:Object(j.jsx)("p",{className:"warning-text",children:"Please enter a room code!"}),Object(j.jsx)("button",{className:"login-button",onClick:e.toggleRoomModal,children:"Create Room"}),e.roomAlreadyExists?Object(j.jsx)("p",{className:"warning-text",children:"This room already exists!"}):null,e.roomDoesNot?Object(j.jsx)("p",{className:"warning-text",children:"This room does not exist!"}):null,e.roomCreated?Object(j.jsx)("p",{className:"happy-text",children:"Your room was created!"}):null,Object(j.jsx)("p",{className:"login-text",children:"This is only used to show other participants who you are."}),Object(j.jsxs)("p",{className:"login-text",children:["Support Hyperfocus by ",Object(j.jsx)("a",{href:"https://www.buymeacoffee.com/nathanyeung",target:"_blank",rel:"noopener noreferrer",children:"buying me a coffee!"})]}),Object(j.jsxs)("p",{className:"login-text",children:["Find Hyperfocus on ",Object(j.jsx)("a",{href:"https://github.com/ThatNerdSquared/hyperfocus-app",target:"_blank",rel:"noopener noreferrer",children:"GitHub"})]})]})};var y=function(e){return Object(j.jsxs)("div",{className:"modal",children:[Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h1",{className:"login-text",children:"Create a Room"}),Object(j.jsxs)("form",{className:"modal-form",children:[Object(j.jsx)("input",{type:"text",value:e.newRoomCode,name:"newRoomCode",placeholder:"New code (i. e. epicroom)",onChange:e.formChange,className:"login-input"}),Object(j.jsx)("button",{className:"login-button",onClick:e.newRoom,children:"Create!"}),e.roomCodeValid?null:Object(j.jsx)("p",{className:"warning-text",children:"Please enter a room code!"})]})]}),Object(j.jsx)("button",{className:"close-button",onClick:e.toggleRoomModal,children:"\xd7"})]})};var S=function(e){return Object(j.jsx)("div",{className:"participants",children:Object(j.jsx)("p",{children:e.username})})};var R=function(e){var t=[];return e.participants.forEach((function(e){var n=e;e.length>=25&&(n=e.slice(0,24)+"..."),t.push(Object(j.jsx)(S,{username:n}))})),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"header2",children:"Participants"}),t]})},k=n.p+"static/media/hyperfocus-favicon.43629efd.png",M=n(38);function D(e){var t;M.isMobile&&("undefined"!==typeof document.hidden?("hidden",t="visibilitychange"):"undefined"!==typeof document.msHidden?("msHidden",t="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&("webkitHidden",t="webkitvisibilitychange"),window.addEventListener(t,e));return window.addEventListener("beforeunload",V),window.addEventListener("unload",e),function(){!function(e){window.removeEventListener("beforeunload",V),window.removeEventListener("unload",e)}(e)}}function V(e){e.preventDefault(),e.returnValue=""}var T,A=n.p+"static/media/hyperfocus-chime.258cb2f0.mp3";function E(e){return Math.max(Math.floor(Math.log10(Math.abs(e))),0)+1}T=w()();var I=function(e){Object(g.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(m.a)(this,n),(o=t.call(this,e)).state={timerStatus:{id:27,roomCode:"",minutes:10101,seconds:42,pom:!1,isRunning:!1,isIntervalSet:!1,timerOptions:[],participants:[]},isLoggedIn:!1,newOption:"",loginName:"",loginCode:"",loginNameValid:!0,loginCodeValid:!0,newRoomModalShown:!1,newRoomCode:"",roomCodeValid:!0,roomAlreadyExists:!1,roomCreated:!1,roomDoesNot:!1,currentUser:{name:"Guest",totalPomsToday:0,isOnline:!0}},o.startTimer=o.startTimer.bind(Object(h.a)(o)),o.toggleRunning=o.toggleRunning.bind(Object(h.a)(o)),o.handleNewStatus=o.handleNewStatus.bind(Object(h.a)(o)),o.formChange=o.formChange.bind(Object(h.a)(o)),o.toggleRoomModal=o.toggleRoomModal.bind(Object(h.a)(o)),o.newRoom=o.newRoom.bind(Object(h.a)(o)),o.handleAddOption=o.handleAddOption.bind(Object(h.a)(o)),o.handleDeleteOption=o.handleDeleteOption.bind(Object(h.a)(o)),o.logMeIn=o.logMeIn.bind(Object(h.a)(o)),o.logMeOut=o.logMeOut.bind(Object(h.a)(o)),o}return Object(u.a)(n,[{key:"formChange",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(c.a)({},t,n))}},{key:"toggleRoomModal",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!this.state.newRoomModalShown,e.next=3,this.setState({newRoomModalShown:t,roomCodeValid:!0,roomAlreadyExists:!1,roomCreated:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newRoom",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.newRoomCode){e.next=6;break}return e.next=4,this.setState({roomCodeValid:!1});case 4:e.next=11;break;case 6:return n=this.state.newRoomCode,e.next=9,this.setState({roomCodeValid:!0,newRoomCode:""});case 9:this.toggleRoomModal(),T.emit("newRoom",n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"startTimer",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={roomCode:this.state.timerStatus.roomCode,minutes:t.target.name,pom:this.state.timerStatus.pom},T.emit("startTimer",n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logMeOut",value:function(){var e={user:this.state.currentUser,roomCode:this.state.timerStatus.roomCode};T.emit("logMeOut",e)}},{key:"logMeIn",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.loginName){e.next=6;break}return e.next=4,this.setState({loginNameValid:!1});case 4:e.next=8;break;case 6:return e.next=8,this.setState({loginNameValid:!0});case 8:if(""!==this.state.loginCode){e.next=13;break}return e.next=11,this.setState({loginCodeValid:!1});case 11:e.next=15;break;case 13:return e.next=15,this.setState({loginCodeValid:!0});case 15:this.state.loginNameValid&&this.state.loginCodeValid&&(n={loginName:this.state.loginName,roomCode:this.state.loginCode},T.emit("join",n),D(this.logMeOut),T.on("connectionData",this.handleNewStatus),T.on("timerStarted",this.handleNewStatus),T.on("timerToggled",this.handleNewStatus),T.on("timerGoTickTock",this.handleNewStatus),T.on("optionAdded",this.handleNewStatus),T.on("optionDeleted",this.handleNewStatus),T.on("userLoggedOut",this.handleNewStatus));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setState({isLoggedIn:!1}),"Notification"in window?(console.log("Notifications are supported"),Notification.requestPermission()):console.log("This browser does not support desktop notification"),T.on("private",this.handleNewStatus)}},{key:"handleNewStatus",value:function(e){if(null!=e.timerStatus){var t=e.timerStatus[0];this.setState({timerStatus:t})}!0===e.pomDone&&("Notification"in window?(new Notification("Hyperfocus",{body:"Your timer has finished!",icon:k}),new Audio(A).play()):alert("Your work session has finished!"));if(null!=e.currentUser){var n=e.currentUser;this.setState({currentUser:n})}!0===e.isLoggedIn&&this.setState({isLoggedIn:!0,roomAlreadyExists:!1}),!0===e.roomAlreadyExists&&this.setState({roomAlreadyExists:!0}),!0===e.roomCreated&&this.setState({roomCreated:!0}),!0===e.roomDoesNot&&this.setState({roomDoesNot:!0})}},{key:"handleAddOption",value:function(e){e.preventDefault();var t=this.state.newOption,n=parseInt(t);if(!isNaN(n)){var o={roomCode:this.state.timerStatus.roomCode,option:n};T.emit("addOption",o),this.setState({newOption:""})}}},{key:"handleDeleteOption",value:function(e){e.preventDefault();var t={roomCode:this.state.timerStatus.roomCode,option:e.target.name};T.emit("deleteOption",t)}},{key:"toggleRunning",value:function(e){var t;e.preventDefault(),t=!0!==this.state.timerStatus.isRunning;var n={roomCode:this.state.timerStatus.roomCode,isRunning:t};T.emit("toggleTimer",n)}},{key:"render",value:function(){if(this.state.isLoggedIn){var e,t,n,o=this.state.timerStatus;return e=E(o.minutes)<=1?"0".concat(o.minutes):o.minutes,t=E(o.seconds)<=1?"0".concat(o.seconds):o.seconds,n=!0===this.state.timerStatus.pom?"Work Session":"Break Time",Object(j.jsxs)("div",{className:"app",children:[Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("img",{src:N,width:"600",height:"100",alt:"Hyperfocus app logo"}),Object(j.jsx)("h1",{children:n})]}),Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("h1",{children:"".concat(e,":").concat(t)})}),Object(j.jsxs)("div",{className:"panes",children:[Object(j.jsx)("div",{children:Object(j.jsx)(x,{timerOptions:o.timerOptions,id:o.id,startTimer:this.startTimer,toggleRunning:this.toggleRunning,formChange:this.formChange,newOption:this.state.newOption,handleAddOption:this.handleAddOption,handleDeleteOption:this.handleDeleteOption,isRunning:this.state.timerStatus.isRunning})}),Object(j.jsx)("div",{children:Object(j.jsx)(R,{participants:this.state.timerStatus.participants})})]})]})}return Object(j.jsxs)("div",{children:[Object(j.jsx)(C,{logMeIn:this.logMeIn,formChange:this.formChange,toggleRoomModal:this.toggleRoomModal,loginName:this.state.loginName,loginNameValid:this.state.loginNameValid,loginCodeValid:this.state.loginCodeValid,roomAlreadyExists:this.state.roomAlreadyExists,roomCreated:this.state.roomCreated,roomDoesNot:this.state.roomDoesNot}),this.state.newRoomModalShown?Object(j.jsx)(y,{newRoom:this.newRoom,toggleRoomModal:this.toggleRoomModal,formChange:this.formChange,newRoomCode:this.state.newRoomCode,roomCodeValid:this.state.roomCodeValid}):null]})}}]),n}(i.a.Component);n(79);s.a.render(Object(j.jsx)(I,{}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.6ffdd7a5.chunk.js.map